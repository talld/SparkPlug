#pragma once

#include <GLFW/glfw3.h>
#include <vulkan/vulkan.h>
#include <stdexcept>
#include <cstdint>
#include <algorithm>
#include <iostream>
#include <cstdlib>
#include <set>
#include <vector>
#include <array>
#include <optional>
#include <fstream>
#include "Swapchain.h"


class Instnace;

class PhysicalDevice;

class LogicalDeivce;

class Swapchain;

class RenderPass;

struct Pipeline {
	VkPipelineLayout layout;
	VkPipeline graphicsPipeline;
};

struct View {
	VkRect2D scissor{};
	VkViewport viewPort{};
};

class GraphicsPipeline {

private:

	Pipeline pipeline;

	View view;

	VkShaderModule createShadeModule(VkDevice logicalDevice, static std::vector<char>& code);

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Temporary file shaders system
//
//this will be replaced by a build into gslang compiler that compiles glsl into sprv on build
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	static std::vector<char> readFile(const std::string& filename);

public:

	void create(VkDevice vkLogicalDevice, Swapchain swapchain, RenderPass renderPass);

	Pipeline getPipeline();

	VkRect2D* getViewScissor();

	VkViewport* getViewPort();

	void destroy(VkDevice vkLogicalDevice);
};
